/*! depres - v0.1.0 - (c) 2014 Camille Reynders; Licensed MIT */!function(a,b){"object"==typeof exports?module.exports=b(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],b):a.depres=b(a._)}(this,function(a){"use strict";function b(a){this.id=a,this.deps=[]}function c(b,d,e){d.unresolved.push(b);var f=a.some(b.deps,function(b){return e&&(b=e(b)),a.find(d.resolved,{id:b.id})?!1:a.find(d.unresolved,{id:b.id})?!0:c(b,d,e)});return f||(d.resolved.push(b),a.pull(d.unresolved,b)),f}function d(a){var b={resolved:[],unresolved:[]};return b.aborted=c(a,b),b}function e(d){var e={resolved:[],unresolved:[]},f=new b("root");return f.add(a.keys(d)),e.aborted=c(f,e,function(c){return a.isString(c)&&(c=new b(c),c.add(d[c.id])),c}),a.each(["unresolved","resolved"],function(b){a.remove(e[b],{id:"root"}),e[b]=a.pluck(e[b],"id")}),e}return b.prototype.add=function(){var b=arguments[0];a.isArray(b)||(b=a.toArray(arguments)),this.deps=this.deps.concat(b)},{resolveTree:d,resolveMap:e,Node:b}});